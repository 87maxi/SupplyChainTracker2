# PLAN DE IMPLEMENTACIÓN - MEJORAS DE USABILIDAD EN ADMIN UI\n\n## FASE 1: MEJORAS CRÍTICAS DE USABILIDAD\n\n### Tarea 1: Añadir contador de solicitudes pendientes en navegación\n\n#### Archivos a modificar:\n- `web/src/components/layout/Navigation.tsx`\n- `web/src/hooks/useRoleRequests.ts`\n\n#### Implementación:\n1. Crear hook para obtener conteo de solicitudes pendientes\n2. Modificar componente de navegación para mostrar badges con contadores\n3. Añadir estilos para resaltar secciones con contenido pendiente\n\n#### Código a implementar:\n```typescript\n// En useRoleRequests.ts\nconst getPendingRequestsCount = () => {\n  return requests.filter(req => req.status === 'pending').length;\n};\n\n// En Navigation.tsx\nconst { getPendingRequestsCount } = useRoleRequests();\nconst pendingCount = getPendingRequestsCount();\n\n// En el renderizado del menú\n{item.href === '/admin' && pendingCount > 0 && (\n  <Badge variant=\"destructive\" className=\"ml-2\">\n    {pendingCount}\n  </Badge>\n)}\n```\n\n### Tarea 2: Implementar feedback visual durante operaciones\n\n#### Archivos a modificar:\n- `web/src/components/contract/RoleApprovalManager.tsx`\n- `web/src/app/admin/components/DashboardOverview.tsx`\n\n#### Implementación:\n1. Añadir estados de carga en todos los botones de acción\n2. Mostrar progreso detallado durante transacciones blockchain\n3. Añadir indicadores visuales de éxito/error\n\n#### Código a implementar:\n```typescript\n// En RoleApprovalManager.tsx\n<Button \n  onClick={handleApproveRole} \n  disabled={status === 'pending' || status === 'success'}\n  variant=\"default\"\n  size=\"sm\"\n>\n  {status === 'pending' ? (\n    <>\n      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n      Aprobando...\n    </>\n  ) : status === 'success' ? (\n    <>\n      <Check className=\"mr-2 h-4 w-4\" />\n      Aprobado\n    </>\n  ) : 'Aprobar'}\n</Button>\n```\n\n### Tarea 3: Mejorar notificaciones de éxito/error\n\n#### Archivos a modificar:\n- `web/src/components/contract/RoleApprovalManager.tsx`\n- `web/src/app/admin/components/DashboardOverview.tsx`\n\n#### Implementación:\n1. Añadir detalles técnicos en notificaciones de error\n2. Mostrar tiempo estimado para completar operaciones\n3. Añadir opción para reintentar operaciones fallidas\n\n#### Código a implementar:\n```typescript\n// En RoleApprovalManager.tsx\ntoast({\n  title: \"Error\",\n  description: (\n    <div>\n      <p>{errorMessage}</p>\n      <p className=\"text-xs text-muted-foreground mt-1\">\n        Código de error: {error.code}\n      </p>\n      <Button \n        variant=\"outline\" \n        size=\"sm\" \n        className=\"mt-2\"\n        onClick={() => handleApproveRole()}\n      >\n        Reintentar\n      </Button>\n    </div>\n  ),\n  variant: \"destructive\",\n});\n```\n\n## FASE 2: MEJORAS DE NAVEGACIÓN\n\n### Tarea 1: Añadir indicadores visuales en menú de navegación\n\n#### Archivos a modificar:\n- `web/src/components/layout/Navigation.tsx`\n\n#### Implementación:\n1. Añadir badges con contadores en elementos del menú\n2. Implementar resaltado de secciones con contenido pendiente\n3. Añadir animaciones sutiles para mejorar la atención visual\n\n### Tarea 2: Implementar tooltips descriptivos\n\n#### Archivos a modificar:\n- `web/src/components/layout/Navigation.tsx`\n\n#### Implementación:\n1. Añadir tooltips con descripciones detalladas\n2. Implementar tooltips responsivos\n3. Añadir información contextual en tooltips\n\n### Tarea 3: Añadir resaltado de secciones con contenido pendiente\n\n#### Archivos a modificar:\n- `web/src/components/layout/Navigation.tsx`\n\n#### Implementación:\n1. Implementar sistema de resaltado visual\n2. Añadir animaciones de atención\n3. Configurar colores distintivos para diferentes tipos de contenido pendiente\n\n## FASE 3: MEJORAS DE GESTIÓN DE USUARIOS\n\n### Tarea 1: Implementar funcionalidad de revocar roles\n\n#### Archivos a modificar:\n- `web/src/app/admin/components/UsersList.tsx`\n- `web/src/services/SupplyChainService.ts`\n- `web/src/components/contract/RoleRevocationManager.tsx` (nuevo)\n\n#### Implementación:\n1. Crear componente RoleRevocationManager\n2. Añadir función revokeRole en SupplyChainService\n3. Implementar botón de revocar en la lista de usuarios\n\n#### Código a implementar:\n```typescript\n// Nuevo componente RoleRevocationManager.tsx\nexport function RoleRevocationManager({ \n  targetAddress, \n  role, \n  onRevocationComplete,\n  onRevocationError\n}: RoleRevocationManagerProps) {\n  // Implementación similar a RoleApprovalManager pero para revocar roles\n}\n\n// En SupplyChainService.ts\nexport const revokeRole = async (role: string, userAddress: string) => {\n  try {\n    const hash = await writeContract(config, {\n      address: contractAddress,\n      abi,\n      functionName: 'revokeRole',\n      args: [role, userAddress]\n    });\n\n    const receipt = await waitForTransactionReceipt(config, { hash });\n    return receipt;\n  } catch (error) {\n    console.error('Error revoking role:', error);\n    throw error;\n  }\n};\n```\n\n### Tarea 2: Añadir historial de solicitudes\n\n#### Archivos a modificar:\n- `web/src/app/admin/components/RequestHistory.tsx` (nuevo)\n- `web/src/app/admin/page.tsx`\n- `web/src/hooks/useRoleRequests.ts`\n\n#### Implementación:\n1. Crear componente RequestHistory\n2. Añadir función para obtener solicitudes aprobadas/rechazadas\n3. Implementar filtros y paginación\n\n### Tarea 3: Implementar búsqueda y filtrado\n\n#### Archivos a modificar:\n- `web/src/app/admin/components/UsersList.tsx`\n- `web/src/components/layout/SearchBar.tsx` (nuevo)\n\n#### Implementación:\n1. Crear componente SearchBar\n2. Implementar filtrado en tiempo real\n3. Añadir múltiples criterios de búsqueda\n\n## CRONOMETRAJE ESTIMADO\n\n### Fase 1: 2-3 días\n- Tarea 1: 1 día\n- Tarea 2: 1 día\n- Tarea 3: 1 día\n\n### Fase 2: 3-4 días\n- Tarea 1: 1 día\n- Tarea 2: 1 día\n- Tarea 3: 1-2 días\n\n### Fase 3: 4-5 días\n- Tarea 1: 2 días\n- Tarea 2: 1 día\n- Tarea 3: 1-2 días\n\n## RECURSOS NECESARIOS\n\n### Desarrollo\n- 1 desarrollador frontend con experiencia en React/Next.js\n- 1 desarrollador blockchain con experiencia en Solidity/web3\n\n### Pruebas\n- 1 tester de UI/UX\n- 1 tester de funcionalidad blockchain\n\n### Diseño\n- 1 diseñador UI/UX para crear mockups de las mejoras\n\n## MÉTRICAS DE ÉXITO\n\n### Métricas cuantitativas:\n- Reducción del 50% en el tiempo para aprobar solicitudes de rol\n- Aumento del 30% en la satisfacción del usuario (encuestas)\n- Reducción del 70% en errores de navegación\n\n### Métricas cualitativas:\n- Feedback positivo de administradores sobre la usabilidad\n- Reducción de preguntas de soporte relacionadas con la interfaz\n- Mejora en la eficiencia de la gestión administrativa"